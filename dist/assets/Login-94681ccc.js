import{d as E,v as b,N as h,p as V,aL as I,a as C,k as m,l as s,w as a,o as F,f as _,bu as L,bv as B,a8 as N,q as f,ap as U,A as g,an as q,ao as K,m as R}from"./index-d1ec9bbb.js";import{a as S,E as A}from"./el-form-item-29d811fb.js";import{E as D}from"./el-button-39435904.js";/* empty css                 */import{E as w}from"./index-e60a1986.js";import{E as M}from"./index-d6e4858e.js";import"./use-form-item-d6cebf64.js";import"./_Uint8Array-dd57adc6.js";import"./_initCloneObject-f5717ced.js";import"./index-5a242a52.js";const v=n=>(q("data-v-60524e71"),n=n(),K(),n),$={class:"login"},z={class:"form-cls"},T=v(()=>m("div",{class:"title"},"学习宝",-1)),j=v(()=>m("div",{style:{"font-size":"14px","line-height":"32px","text-align":"center",color:"yellow"}},"书山有路勤为径，学海无涯苦作舟",-1)),G=E({__name:"Login",setup(n){const y=U(),e=b({user:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 10 个字符",trigger:"blur"}]}}),u=h(),p=t=>{t&&t.validate(o=>{if(o)g.login(e.user).then(r=>{g.storeUserInfo(r.data),y.push("/")}).catch(r=>{w.error(`用户名或密码错误，${r.code}`)});else return w.error("用户名或密码不符合规则"),!1})},x=()=>{e.user.username="",e.user.password=""},i=t=>{(t.keyCode==13||t.keyCode==100)&&p(u.value)};return V(()=>window.addEventListener("keydown",i)),I(()=>window.removeEventListener("keydown",i,!1)),(t,o)=>{const r=M,d=A,c=D,k=S;return F(),C("div",$,[m("div",z,[s(k,{ref_key:"ruleFormRef",ref:u,model:e.user,"status-icon":"",rules:e.rules},{default:a(()=>[T,j,s(d,{prop:"username"},{default:a(()=>[s(r,{modelValue:e.user.username,"onUpdate:modelValue":o[0]||(o[0]=l=>e.user.username=l),type:"text",autocomplete:"off","prefix-icon":_(L)},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,{prop:"password"},{default:a(()=>[s(r,{modelValue:e.user.password,"onUpdate:modelValue":o[1]||(o[1]=l=>e.user.password=l),type:"password",autocomplete:"off","prefix-icon":_(B),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,null,{default:a(()=>[s(c,{class:"login-btn",type:"primary",onClick:o[2]||(o[2]=l=>p(u.value)),onKeydown:N(i,["enter"])},{default:a(()=>[f("登录")]),_:1},8,["onKeydown"]),s(c,{class:"login-btn",onClick:x},{default:a(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}});const oe=R(G,[["__scopeId","data-v-60524e71"]]);export{oe as default};
