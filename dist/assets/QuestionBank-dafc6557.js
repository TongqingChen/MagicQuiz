import{d as ie,O as he,aN as Et,$ as be,aW as et,aX as tt,aM as $t,aa as at,h as k,a4 as Se,m as Z,o as v,p as A,q as Y,c as O,a2 as ye,w as P,b as x,n as B,F as te,a as se,y as nt,ab as St,N as lt,k as V,s as pe,f as le,t as G,aY as Be,G as Ue,Q as Tt,H as st,aE as ke,aZ as Vt,a_ as Lt,U as Ee,K as $e,ax as Pt,r as me,T as oe,a$ as Dt,e as Fe,ag as de,an as ot,aq as Mt,ar as j,b0 as we,b1 as it,I as xt,au as It,b2 as Bt,b3 as zt,P as Ft,R as At,a6 as Ht,b4 as qt,b5 as Kt,aj as Ot,W as ge,u as c,g as Rt,a3 as Ut,av as Qt,Y as jt,i as Qe,X as Wt,aB as Zt,b6 as rt,ah as je,ai as Xt,as as Yt,A as Ie,E as Gt,_ as Jt}from"./index-56ef5580.js";import{Q as ea}from"./QuestionDialog-772d64c0.js";import{b as ta,c as aa,E as na,a as la}from"./el-table-column-ac1358a9.js";import{t as sa,E as We}from"./el-tag-497bb1cc.js";import{b as oa,E as ia,a as ra}from"./el-radio-group-9052001e.js";/* empty css                        *//* empty css                 */import{c as Ze}from"./strings-b5b50dd0.js";import{i as Ce,C as ua}from"./index-949f977e.js";import{c as ut}from"./cloneDeep-a58cf06a.js";import{d as ca}from"./debounce-43569316.js";import{v as da}from"./directive-22bae4fb.js";import"./el-image-viewer-2778631b.js";var pa=1/0;function ha(e){var t=e==null?0:e.length;return t?ta(e,pa):[]}const Xe=e=>[...new Set(e)],Ye=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],fa=()=>Math.floor(Math.random()*1e4);var va=ie({name:"NodeContent",setup(){return{ns:he("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:l}=this.$parent,{data:n,label:o}=t,{renderLabelFn:p}=l;return Et("span",{class:e.e("label")},p?p({node:t,data:n}):o)}});const Ae=Symbol(),ma=ie({name:"ElCascaderNode",components:{ElCheckbox:aa,ElRadio:oa,NodeContent:va,ElIcon:be,Check:et,Loading:tt,ArrowRight:$t},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const l=at(Ae),n=he("cascader-node"),o=k(()=>l.isHoverMenu),p=k(()=>l.config.multiple),u=k(()=>l.config.checkStrictly),h=k(()=>{var w;return(w=l.checkedNodes[0])==null?void 0:w.uid}),r=k(()=>e.node.isDisabled),g=k(()=>e.node.isLeaf),_=k(()=>u.value&&!g.value||!r.value),I=k(()=>H(l.expandingNode)),z=k(()=>u.value&&l.checkedNodes.some(H)),H=w=>{var m;const{level:F,uid:ae}=e.node;return((m=w==null?void 0:w.pathNodes[F-1])==null?void 0:m.uid)===ae},y=()=>{I.value||l.expandNode(e.node)},b=w=>{const{node:m}=e;w!==m.checked&&l.handleCheckChange(m,w)},C=()=>{l.lazyLoad(e.node,()=>{g.value||y()})},D=w=>{o.value&&(M(),!g.value&&t("expand",w))},M=()=>{const{node:w}=e;!_.value||w.loading||(w.loaded?y():C())},E=()=>{o.value&&!g.value||(g.value&&!r.value&&!u.value&&!p.value?U(!0):M())},K=w=>{u.value?(b(w),e.node.loaded&&y()):U(w)},U=w=>{e.node.loaded?(b(w),!u.value&&y()):C()};return{panel:l,isHoverMenu:o,multiple:p,checkStrictly:u,checkedNodeId:h,isDisabled:r,isLeaf:g,expandable:_,inExpandingPath:I,inCheckedPath:z,ns:n,handleHoverExpand:D,handleExpand:M,handleClick:E,handleCheck:U,handleSelectCheck:K}}}),ga=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ba=se("span",null,null,-1);function ya(e,t,l,n,o,p){const u=Z("el-checkbox"),h=Z("el-radio"),r=Z("check"),g=Z("el-icon"),_=Z("node-content"),I=Z("loading"),z=Z("arrow-right");return v(),A("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:B([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...H)=>e.handleHoverExpand&&e.handleHoverExpand(...H)),onFocus:t[3]||(t[3]=(...H)=>e.handleHoverExpand&&e.handleHoverExpand(...H)),onClick:t[4]||(t[4]=(...H)=>e.handleClick&&e.handleClick(...H))},[Y(" prefix "),e.multiple?(v(),O(u,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ye(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(v(),O(h,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ye(()=>{},["stop"]))},{default:P(()=>[Y(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ba]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(v(),O(g,{key:2,class:B(e.ns.e("prefix"))},{default:P(()=>[x(r)]),_:1},8,["class"])):Y("v-if",!0),Y(" content "),x(_),Y(" postfix "),e.isLeaf?Y("v-if",!0):(v(),A(te,{key:3},[e.node.loading?(v(),O(g,{key:0,class:B([e.ns.is("loading"),e.ns.e("postfix")])},{default:P(()=>[x(I)]),_:1},8,["class"])):(v(),O(g,{key:1,class:B(["arrow-right",e.ns.e("postfix")])},{default:P(()=>[x(z)]),_:1},8,["class"]))],64))],42,ga)}var ka=Se(ma,[["render",ya],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const Ca=ie({name:"ElCascaderMenu",components:{Loading:tt,ElIcon:be,ElScrollbar:nt,ElCascaderNode:ka},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=St(),l=he("cascader-menu"),{t:n}=lt(),o=fa();let p=null,u=null;const h=at(Ae),r=V(null),g=k(()=>!e.nodes.length),_=k(()=>!h.initialLoaded),I=k(()=>`cascader-menu-${o}-${e.index}`),z=C=>{p=C.target},H=C=>{if(!(!h.isHoverMenu||!p||!r.value))if(p.contains(C.target)){y();const D=t.vnode.el,{left:M}=D.getBoundingClientRect(),{offsetWidth:E,offsetHeight:K}=D,U=C.clientX-M,w=p.offsetTop,m=w+p.offsetHeight;r.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${U} ${w} L${E} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${U} ${m} L${E} ${K} V${m} Z" />
        `}else u||(u=window.setTimeout(b,h.config.hoverThreshold))},y=()=>{u&&(clearTimeout(u),u=null)},b=()=>{r.value&&(r.value.innerHTML="",y())};return{ns:l,panel:h,hoverZone:r,isEmpty:g,isLoading:_,menuId:I,t:n,handleExpand:z,handleMouseMove:H,clearHoverZone:b}}});function wa(e,t,l,n,o,p){const u=Z("el-cascader-node"),h=Z("loading"),r=Z("el-icon"),g=Z("el-scrollbar");return v(),O(g,{key:e.menuId,tag:"ul",role:"menu",class:B(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:P(()=>{var _;return[(v(!0),A(te,null,pe(e.nodes,I=>(v(),O(u,{key:I.uid,node:I,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(v(),A("div",{key:0,class:B(e.ns.e("empty-text"))},[x(r,{size:"14",class:B(e.ns.is("loading"))},{default:P(()=>[x(h)]),_:1},8,["class"]),le(" "+G(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(v(),A("div",{key:1,class:B(e.ns.e("empty-text"))},G(e.t("el.cascader.noData")),3)):(_=e.panel)!=null&&_.isHoverMenu?(v(),A("svg",{key:2,ref:"hoverZone",class:B(e.ns.e("hover-zone"))},null,2)):Y("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Na=Se(Ca,[["render",wa],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let _a=0;const Ea=e=>{const t=[e];let{parent:l}=e;for(;l;)t.unshift(l),l=l.parent;return t};class fe{constructor(t,l,n,o=!1){this.data=t,this.config=l,this.parent=n,this.root=o,this.uid=_a++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:u,children:h}=l,r=t[h],g=Ea(this);this.level=o?0:n?n.level+1:1,this.value=t[p],this.label=t[u],this.pathNodes=g,this.pathValues=g.map(_=>_.value),this.pathLabels=g.map(_=>_.label),this.childrenData=r,this.children=(r||[]).map(_=>new fe(_,l,this)),this.loaded=!l.lazy||this.isLeaf||!Be(r)}get isDisabled(){const{data:t,parent:l,config:n}=this,{disabled:o,checkStrictly:p}=n;return(Ue(o)?o(t,this):!!t[o])||!p&&(l==null?void 0:l.isDisabled)}get isLeaf(){const{data:t,config:l,childrenData:n,loaded:o}=this,{lazy:p,leaf:u}=l,h=Ue(u)?u(t,this):t[u];return Tt(h)?p&&!o?!1:!(Array.isArray(n)&&n.length):!!h}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:l,children:n}=this,o=new fe(t,this.config,this);return Array.isArray(l)?l.push(t):this.childrenData=[t],n.push(o),o}calcText(t,l){const n=t?this.pathLabels.join(l):this.label;return this.text=n,n}broadcast(t,...l){const n=`onParent${Ze(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...l),o[n]&&o[n](...l))})}emit(t,...l){const{parent:n}=this,o=`onChild${Ze(t)}`;n&&(n[o]&&n[o](...l),n.emit(t,...l))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,l=t.filter(o=>!o.isDisabled),n=l.length?l.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(t){const l=this.children.length,n=this.children.reduce((o,p)=>{const u=p.checked?1:p.indeterminate?.5:0;return o+u},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&n!==l&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:l,multiple:n}=this.config;l||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const ze=(e,t)=>e.reduce((l,n)=>(n.isLeaf?l.push(n):(!t&&l.push(n),l=l.concat(ze(n.children,t))),l),[]);class Ge{constructor(t,l){this.config=l;const n=(t||[]).map(o=>new fe(o,this.config));this.nodes=n,this.allNodes=ze(n,!1),this.leafNodes=ze(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,l){const n=l?l.appendChild(t):new fe(t,this.config);l||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,l){t.forEach(n=>this.appendNode(n,l))}getNodeByValue(t,l=!1){return!t&&t!==0?null:this.getFlattedNodes(l).find(o=>Ce(o.value,t)||Ce(o.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:o})=>Ce(t.value,n)&&t.level===o)||null}}const ct=st({modelValue:{type:ke([Number,String,Array])},options:{type:ke(Array),default:()=>[]},props:{type:ke(Object),default:()=>({})}}),$a={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Vt,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Sa=e=>k(()=>({...$a,...e.props})),Je=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Ta=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():Lt(e)&&e.click()},Va=(e,t)=>{const l=t.slice(0),n=l.map(p=>p.uid),o=e.reduce((p,u)=>{const h=n.indexOf(u.uid);return h>-1&&(p.push(u),l.splice(h,1),n.splice(h,1)),p},[]);return o.push(...l),o},La=ie({name:"ElCascaderPanel",components:{ElCascaderMenu:Na},props:{...ct,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,$e,"close","expand-change"],setup(e,{emit:t,slots:l}){let n=!1;const o=he("cascader"),p=Sa(e);let u=null;const h=V(!0),r=V([]),g=V(null),_=V([]),I=V(null),z=V([]),H=k(()=>p.value.expandTrigger==="hover"),y=k(()=>e.renderLabel||l.default),b=()=>{const{options:d}=e,f=p.value;n=!1,u=new Ge(d,f),_.value=[u.getNodes()],f.lazy&&Be(e.options)?(h.value=!1,C(void 0,N=>{N&&(u=new Ge(N,f),_.value=[u.getNodes()]),h.value=!0,F(!1,!0)})):F(!1,!0)},C=(d,f)=>{const N=p.value;d=d||new fe({},N,void 0,!0),d.loading=!0;const T=$=>{const L=d,q=L.root?null:L;$&&(u==null||u.appendNodes($,q)),L.loading=!1,L.loaded=!0,L.childrenData=L.childrenData||[],f&&f($)};N.lazyLoad(d,T)},D=(d,f)=>{var N;const{level:T}=d,$=_.value.slice(0,T);let L;d.isLeaf?L=d.pathNodes[T-2]:(L=d,$.push(d.children)),((N=I.value)==null?void 0:N.uid)!==(L==null?void 0:L.uid)&&(I.value=d,_.value=$,!f&&t("expand-change",(d==null?void 0:d.pathValues)||[]))},M=(d,f,N=!0)=>{const{checkStrictly:T,multiple:$}=p.value,L=z.value[0];n=!0,!$&&(L==null||L.doCheck(!1)),d.doCheck(f),m(),N&&!$&&!T&&t("close"),!N&&!$&&!T&&E(d)},E=d=>{d&&(d=d.parent,E(d),d&&D(d))},K=d=>u==null?void 0:u.getFlattedNodes(d),U=d=>{var f;return(f=K(d))==null?void 0:f.filter(N=>N.checked!==!1)},w=()=>{z.value.forEach(d=>d.doCheck(!1)),m(),_.value=_.value.slice(0,1),I.value=null,t("expand-change",[])},m=()=>{var d;const{checkStrictly:f,multiple:N}=p.value,T=z.value,$=U(!f),L=Va(T,$),q=L.map(R=>R.valueByOption);z.value=L,g.value=N?q:(d=q[0])!=null?d:null},F=(d=!1,f=!1)=>{const{modelValue:N}=e,{lazy:T,multiple:$,checkStrictly:L}=p.value,q=!L;if(!(!h.value||n||!f&&Ce(N,g.value)))if(T&&!d){const ne=Xe(ha(Ye(N))).map(Q=>u==null?void 0:u.getNodeByValue(Q)).filter(Q=>!!Q&&!Q.loaded&&!Q.loading);ne.length?ne.forEach(Q=>{C(Q,()=>F(!1,f))}):F(!0,f)}else{const R=$?Ye(N):[N],ne=Xe(R.map(Q=>u==null?void 0:u.getNodeByValue(Q,q)));ae(ne,f),g.value=ut(N)}},ae=(d,f=!0)=>{const{checkStrictly:N}=p.value,T=z.value,$=d.filter(R=>!!R&&(N||R.isLeaf)),L=u==null?void 0:u.getSameNode(I.value),q=f&&L||$[0];q?q.pathNodes.forEach(R=>D(R,!0)):I.value=null,T.forEach(R=>R.doCheck(!1)),$.forEach(R=>R.doCheck(!0)),z.value=$,de(re)},re=()=>{ot&&r.value.forEach(d=>{const f=d==null?void 0:d.$el;if(f){const N=f.querySelector(`.${o.namespace.value}-scrollbar__wrap`),T=f.querySelector(`.${o.b("node")}.${o.is("active")}`)||f.querySelector(`.${o.b("node")}.in-active-path`);Mt(N,T)}})},ue=d=>{const f=d.target,{code:N}=d;switch(N){case j.up:case j.down:{d.preventDefault();const T=N===j.up?-1:1;we(it(f,T,`.${o.b("node")}[tabindex="-1"]`));break}case j.left:{d.preventDefault();const T=r.value[Je(f)-1],$=T==null?void 0:T.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);we($);break}case j.right:{d.preventDefault();const T=r.value[Je(f)+1],$=T==null?void 0:T.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);we($);break}case j.enter:Ta(f);break}};return Pt(Ae,me({config:p,expandingNode:I,checkedNodes:z,isHoverMenu:H,initialLoaded:h,renderLabelFn:y,lazyLoad:C,expandNode:D,handleCheckChange:M})),oe([p,()=>e.options],b,{deep:!0,immediate:!0}),oe(()=>e.modelValue,()=>{n=!1,F()},{deep:!0}),oe(()=>g.value,d=>{Ce(d,e.modelValue)||(t(Ee,d),t($e,d))}),Dt(()=>r.value=[]),Fe(()=>!Be(e.modelValue)&&F()),{ns:o,menuList:r,menus:_,checkedNodes:z,handleKeyDown:ue,handleCheckChange:M,getFlattedNodes:K,getCheckedNodes:U,clearCheckedNodes:w,calculateCheckedValue:m,scrollToExpandingNode:re}}});function Pa(e,t,l,n,o,p){const u=Z("el-cascader-menu");return v(),A("div",{class:B([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...h)=>e.handleKeyDown&&e.handleKeyDown(...h))},[(v(!0),A(te,null,pe(e.menus,(h,r)=>(v(),O(u,{key:r,ref_for:!0,ref:g=>e.menuList[r]=g,index:r,nodes:[...h]},null,8,["index","nodes"]))),128))],34)}var Ne=Se(La,[["render",Pa],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const Da=Ne,Ma=st({...ct,size:xt,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ke(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ke(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:It.teleported,tagType:{...sa.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),xa={[Ee]:e=>!!e||e===null,[$e]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>Bt(e),expandChange:e=>!!e,removeTag:e=>!!e},Ia={key:0},Ba=["placeholder","onKeydown"],za=["onClick"],Fa="ElCascader",Aa=ie({name:Fa}),Ha=ie({...Aa,props:Ma,emits:xa,setup(e,{expose:t,emit:l}){const n=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:s,placement:i}=a;["right","left","bottom","top"].includes(i)||(s.arrow.x=35)},requires:["arrow"]}]},p=zt();let u=0,h=0;const r=he("cascader"),g=he("input"),{t:_}=lt(),{form:I,formItem:z}=Ft(),H=V(null),y=V(null),b=V(null),C=V(null),D=V(null),M=V(!1),E=V(!1),K=V(!1),U=V(!1),w=V(""),m=V(""),F=V([]),ae=V([]),re=V([]),ue=V(!1),d=k(()=>p.style),f=k(()=>n.disabled||(I==null?void 0:I.disabled)),N=k(()=>n.placeholder||_("el.cascader.placeholder")),T=k(()=>m.value||F.value.length>0||ue.value?"":N.value),$=At(),L=k(()=>["small"].includes($.value)?"small":"default"),q=k(()=>!!n.props.multiple),R=k(()=>!n.filterable||q.value),ne=k(()=>q.value?m.value:w.value),Q=k(()=>{var a;return((a=C.value)==null?void 0:a.checkedNodes)||[]}),dt=k(()=>!n.clearable||f.value||K.value||!E.value?!1:!!Q.value.length),Te=k(()=>{const{showAllLevels:a,separator:s}=n,i=Q.value;return i.length?q.value?"":i[0].calcText(a,s):""}),Ve=k({get(){return ut(n.modelValue)},set(a){l(Ee,a),l($e,a),n.validateEvent&&(z==null||z.validate("change").catch(s=>Ht()))}}),pt=k(()=>[r.b(),r.m($.value),r.is("disabled",f.value),p.class]),ht=k(()=>[g.e("icon"),"icon-arrow-down",r.is("reverse",M.value)]),ft=k(()=>r.is("focus",M.value||U.value)),He=k(()=>{var a,s;return(s=(a=H.value)==null?void 0:a.popperRef)==null?void 0:s.contentRef}),W=a=>{var s,i,S;f.value||(a=a??!M.value,a!==M.value&&(M.value=a,(i=(s=y.value)==null?void 0:s.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(ve(),de((S=C.value)==null?void 0:S.scrollToExpandingNode)):n.filterable&&Me(),l("visibleChange",a)))},ve=()=>{de(()=>{var a;(a=H.value)==null||a.updatePopper()})},Le=()=>{K.value=!1},Pe=a=>{const{showAllLevels:s,separator:i}=n;return{node:a,key:a.uid,text:a.calcText(s,i),hitState:!1,closable:!f.value&&!a.isDisabled,isCollapseTag:!1}},De=a=>{var s;const i=a.node;i.doCheck(!1),(s=C.value)==null||s.calculateCheckedValue(),l("removeTag",i.valueByOption)},vt=()=>{if(!q.value)return;const a=Q.value,s=[],i=[];if(a.forEach(S=>i.push(Pe(S))),ae.value=i,a.length){const[S,...J]=a,ee=J.length;s.push(Pe(S)),ee&&(n.collapseTags?s.push({key:-1,text:`+ ${ee}`,closable:!1,isCollapseTag:!0}):J.forEach(X=>s.push(Pe(X))))}F.value=s},qe=()=>{var a,s;const{filterMethod:i,showAllLevels:S,separator:J}=n,ee=(s=(a=C.value)==null?void 0:a.getFlattedNodes(!n.props.checkStrictly))==null?void 0:s.filter(X=>X.isDisabled?!1:(X.calcText(S,J),i(X,ne.value)));q.value&&(F.value.forEach(X=>{X.hitState=!1}),ae.value.forEach(X=>{X.hitState=!1})),K.value=!0,re.value=ee,ve()},mt=()=>{var a;let s;K.value&&D.value?s=D.value.$el.querySelector(`.${r.e("suggestion-item")}`):s=(a=C.value)==null?void 0:a.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`),s&&(s.focus(),!K.value&&s.click())},Ke=()=>{var a,s;const i=(a=y.value)==null?void 0:a.input,S=b.value,J=(s=D.value)==null?void 0:s.$el;if(!(!ot||!i)){if(J){const ee=J.querySelector(`.${r.e("suggestion-list")}`);ee.style.minWidth=`${i.offsetWidth}px`}if(S){const{offsetHeight:ee}=S,X=F.value.length>0?`${Math.max(ee+6,u)}px`:`${u}px`;i.style.height=X,ve()}}},gt=a=>{var s;return(s=C.value)==null?void 0:s.getCheckedNodes(a)},bt=a=>{ve(),l("expandChange",a)},ce=a=>{var s;const i=(s=a.target)==null?void 0:s.value;if(a.type==="compositionend")ue.value=!1,de(()=>xe(i));else{const S=i[i.length-1]||"";ue.value=!Yt(S)}},yt=a=>{if(!ue.value)switch(a.code){case j.enter:W();break;case j.down:W(!0),de(mt),a.preventDefault();break;case j.esc:M.value===!0&&(a.preventDefault(),a.stopPropagation(),W(!1));break;case j.tab:W(!1);break}},kt=()=>{var a;(a=C.value)==null||a.clearCheckedNodes(),!M.value&&n.filterable&&Me(),W(!1)},Me=()=>{const{value:a}=Te;w.value=a,m.value=a},Ct=a=>{var s,i;const{checked:S}=a;q.value?(s=C.value)==null||s.handleCheckChange(a,!S,!1):(!S&&((i=C.value)==null||i.handleCheckChange(a,!0,!1)),W(!1))},wt=a=>{const s=a.target,{code:i}=a;switch(i){case j.up:case j.down:{const S=i===j.up?-1:1;we(it(s,S,`.${r.e("suggestion-item")}[tabindex="-1"]`));break}case j.enter:s.click();break}},Nt=()=>{const a=F.value,s=a[a.length-1];h=m.value?0:h+1,!(!s||!h||n.collapseTags&&a.length>1)&&(s.hitState?De(s):s.hitState=!0)},Oe=a=>{const s=a.target,i=r.e("search-input");s.className===i&&(U.value=!0),l("focus",a)},Re=a=>{U.value=!1,l("blur",a)},_t=ca(()=>{const{value:a}=ne;if(!a)return;const s=n.beforeFilter(a);qt(s)?s.then(qe).catch(()=>{}):s!==!1?qe():Le()},n.debounce),xe=(a,s)=>{!M.value&&W(!0),!(s!=null&&s.isComposing)&&(a?_t():Le())};return oe(K,ve),oe([Q,f],vt),oe(F,()=>{de(()=>Ke())}),oe(Te,Me,{immediate:!0}),Fe(()=>{const a=y.value.input,s=Number.parseFloat(Kt(g.cssVarName("input-height"),a).value)-2;u=a.offsetHeight||s,Ot(a,Ke)}),t({getCheckedNodes:gt,cascaderPanelRef:C,togglePopperVisible:W,contentRef:He}),(a,s)=>(v(),O(c(Qe),{ref_key:"tooltipRef",ref:H,visible:M.value,teleported:a.teleported,"popper-class":[c(r).e("dropdown"),a.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${c(r).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Le},{default:P(()=>[ge((v(),A("div",{class:B(c(pt)),style:Rt(c(d)),onClick:s[5]||(s[5]=()=>W(c(R)?void 0:!0)),onKeydown:yt,onMouseenter:s[6]||(s[6]=i=>E.value=!0),onMouseleave:s[7]||(s[7]=i=>E.value=!1)},[x(c(Ut),{ref_key:"input",ref:y,modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=i=>w.value=i),placeholder:c(T),readonly:c(R),disabled:c(f),"validate-event":!1,size:c($),class:B(c(ft)),tabindex:c(q)&&a.filterable&&!c(f)?-1:void 0,onCompositionstart:ce,onCompositionupdate:ce,onCompositionend:ce,onFocus:Oe,onBlur:Re,onInput:xe},{suffix:P(()=>[c(dt)?(v(),O(c(be),{key:"clear",class:B([c(g).e("icon"),"icon-circle-close"]),onClick:ye(kt,["stop"])},{default:P(()=>[x(c(Qt))]),_:1},8,["class","onClick"])):(v(),O(c(be),{key:"arrow-down",class:B(c(ht)),onClick:s[0]||(s[0]=ye(i=>W(),["stop"]))},{default:P(()=>[x(c(jt))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),c(q)?(v(),A("div",{key:0,ref_key:"tagWrapper",ref:b,class:B(c(r).e("tags"))},[(v(!0),A(te,null,pe(F.value,i=>(v(),O(c(We),{key:i.key,type:a.tagType,size:c(L),hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:S=>De(i)},{default:P(()=>[i.isCollapseTag===!1?(v(),A("span",Ia,G(i.text),1)):(v(),O(c(Qe),{key:1,disabled:M.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:P(()=>[se("span",null,G(i.text),1)]),content:P(()=>[se("div",{class:B(c(r).e("collapse-tags"))},[(v(!0),A(te,null,pe(ae.value.slice(1),(S,J)=>(v(),A("div",{key:J,class:B(c(r).e("collapse-tag"))},[(v(),O(c(We),{key:S.key,class:"in-tooltip",type:a.tagType,size:c(L),hit:S.hitState,closable:S.closable,"disable-transitions":"",onClose:ee=>De(S)},{default:P(()=>[se("span",null,G(S.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),a.filterable&&!c(f)?ge((v(),A("input",{key:0,"onUpdate:modelValue":s[2]||(s[2]=i=>m.value=i),type:"text",class:B(c(r).e("search-input")),placeholder:c(Te)?"":c(N),onInput:s[3]||(s[3]=i=>xe(m.value,i)),onClick:s[4]||(s[4]=ye(i=>W(!0),["stop"])),onKeydown:Wt(Nt,["delete"]),onCompositionstart:ce,onCompositionupdate:ce,onCompositionend:ce,onFocus:Oe,onBlur:Re},null,42,Ba)),[[Zt,m.value]]):Y("v-if",!0)],2)):Y("v-if",!0)],38)),[[c(ua),()=>W(!1),c(He)]])]),content:P(()=>[ge(x(c(Da),{ref_key:"cascaderPanelRef",ref:C,modelValue:c(Ve),"onUpdate:modelValue":s[8]||(s[8]=i=>rt(Ve)?Ve.value=i:null),options:a.options,props:n.props,border:!1,"render-label":a.$slots.default,onExpandChange:bt,onClose:s[9]||(s[9]=i=>a.$nextTick(()=>W(!1)))},null,8,["modelValue","options","props","render-label"]),[[je,!K.value]]),a.filterable?ge((v(),O(c(nt),{key:0,ref_key:"suggestionPanel",ref:D,tag:"ul",class:B(c(r).e("suggestion-panel")),"view-class":c(r).e("suggestion-list"),onKeydown:wt},{default:P(()=>[re.value.length?(v(!0),A(te,{key:0},pe(re.value,i=>(v(),A("li",{key:i.uid,class:B([c(r).e("suggestion-item"),c(r).is("checked",i.checked)]),tabindex:-1,onClick:S=>Ct(i)},[se("span",null,G(i.text),1),i.checked?(v(),O(c(be),{key:0},{default:P(()=>[x(c(et))]),_:1})):Y("v-if",!0)],10,za))),128)):Xt(a.$slots,"empty",{key:1},()=>[se("li",{class:B(c(r).e("empty-text"))},G(c(_)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[je,K.value]]):Y("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var _e=Se(Ha,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);_e.install=e=>{e.component(_e.name,_e)};const qa=_e,Ka=qa;const Oa={class:"subject"},Ra=ie({__name:"QuestionBank",setup(e){const t=["单选","判断","填空","问答"],l=["简单","一般","困难"];let n=me([]);const o=V(0);let p=me([]);const u=k(()=>p.filter(y=>y.type==o.value));let h=me({header:"",title:"",description:"",image:"",analysis:"",answer:""}),r=me([0,0]);const g=V(!1),_=V(!1),I=y=>{h.title=u.value[y].title,h.description=u.value[y].description,h.image=u.value[y].image,h.analysis=u.value[y].analysis,h.answer=u.value[y].answer,g.value=!0},z=y=>{_.value=!0;var b=n.find(D=>D.value==y[0]);if(b){h.header=`【${b.label}】`;var C=b.children.find(D=>D.value==y[1]);C&&(h.header+=C.label)}p.splice(0,p.length),Ie.getQuestionListByQuizId(y[1]).then(D=>{var M=1;D.data.results.forEach(E=>{p.push({index:M++,id:E.id,type:E.type,title:E.title,description:E.description,image:E.image,analysis:E.analysis,difficulty_level:E.difficulty_level,score:E.score,answer:E.answer})}),_.value=!1})},H=({row:y,rowIndex:b})=>b%2?"":"success-row";return Fe(async()=>{await Ie.getSubjectList().then(y=>{y.data.forEach(b=>{b.id!=3&&n.push({value:b.id,label:b.name,children:[]})})}),await Ie.getQuizList().then(y=>{y.data.forEach(b=>{var C=n.find(D=>D.value==b.subject);C&&C.children.push({value:b.id,label:b.name})}),n=n.filter(b=>b.children.length>0),n.length>0&&n[0].children.length>0&&(r[0]=n[0].value,r[1]=n[0].children[0].value,z(r))})}),(y,b)=>{const C=Ka,D=ia,M=ra,E=na,K=Gt,U=la,w=da;return v(),A(te,null,[se("div",Oa,[le(" 试卷： "),x(C,{modelValue:c(r),"onUpdate:modelValue":b[0]||(b[0]=m=>rt(r)?r.value=m:r=m),size:"small",options:c(n),onChange:z,style:{width:"220px"}},null,8,["modelValue","options"]),le(" 题型： "),x(M,{modelValue:o.value,"onUpdate:modelValue":b[1]||(b[1]=m=>o.value=m),size:"small"},{default:P(()=>[(v(),A(te,null,pe(t,(m,F)=>x(D,{label:F},{default:P(()=>[le(G(m),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),ge((v(),O(U,{data:c(u),style:{width:"100%","font-size":"12px"},"row-class-name":H,border:""},{default:P(()=>[x(E,{fixed:"",type:"index",width:"32px"}),x(E,{label:"题型",width:"40px"},{default:P(m=>[le(G(t[m.row.type]),1)]),_:1}),x(E,{prop:"title",label:"题目","show-overflow-tooltip":""}),x(E,{prop:"description",label:"描述","show-overflow-tooltip":""}),x(E,{label:"难度",width:"40px"},{default:P(m=>[le(G(l[m.row.difficulty_level]),1)]),_:1}),x(E,{fixed:"right",label:"查看",width:"40px"},{default:P(m=>[x(K,{link:"",type:"primary",size:"small",onClick:F=>I(m.$index)},{default:P(()=>[le("详情")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[w,_.value]]),x(ea,{visible:g.value,header:c(h).header,title:c(h).title,image:c(h).image,description:c(h).description,analysis:c(h).analysis,answer:c(h).answer,userAnswer:null,onClose:b[2]||(b[2]=m=>g.value=!1)},null,8,["visible","header","title","image","description","analysis","answer"])],64)}}});const ln=Jt(Ra,[["__scopeId","data-v-3416d9df"]]);export{ln as default};
