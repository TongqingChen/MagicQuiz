import{b as k,d as L,a as K,az as A,e as H,u as Q,a4 as I,aA as R,aB as z,r as m,f as B,h as q,w as D,O as G,aC as X,aD as ee,al as te,o as oe,j as le,x as ae,q as se,s as F,k as w,n as $,_ as ne,t as ue,c as ie,aE as fe,aF as M,a1 as ce,Z as re,aG as de,aH as V,a7 as ve}from"./index-0e95c451.js";import{C as me,U,e as pe}from"./el-button-cf97a925.js";import{g as ye}from"./validator-a720dd50.js";import{c as ge}from"./index-3b6a7a14.js";const xe=k({zIndex:{type:L([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),he={scroll:({scrollTop:e,fixed:n})=>K(e)&&A(n),[me]:e=>A(e)},W="ElAffix",Ce=H({name:W}),Ee=H({...Ce,props:xe,emits:he,setup(e,{expose:n,emit:S}){const t=e,x=Q("affix"),c=I(),h=I(),r=I(),{height:l}=R(),{height:i,width:d,top:p,bottom:f,update:u}=z(h,{windowScroll:!1}),y=z(c),a=m(!1),b=m(0),g=m(0),_=B(()=>({height:a.value?`${i.value}px`:"",width:a.value?`${d.value}px`:""})),T=B(()=>{if(!a.value)return{};const o=t.offset?q(t.offset):0;return{height:`${i.value}px`,width:`${d.value}px`,top:t.position==="top"?o:"",bottom:t.position==="bottom"?o:"",transform:g.value?`translateY(${g.value}px)`:"",zIndex:t.zIndex}}),C=()=>{if(r.value)if(b.value=r.value instanceof Window?document.documentElement.scrollTop:r.value.scrollTop||0,t.position==="top")if(t.target){const o=y.bottom.value-t.offset-i.value;a.value=t.offset>p.value&&y.bottom.value>0,g.value=o<0?o:0}else a.value=t.offset>p.value;else if(t.target){const o=l.value-y.top.value-t.offset-i.value;a.value=l.value-t.offset<f.value&&l.value>y.top.value,g.value=o<0?-o:0}else a.value=l.value-t.offset<f.value},E=()=>{u(),S("scroll",{scrollTop:b.value,fixed:a.value})};return D(a,o=>S("change",o)),G(()=>{var o;t.target?(c.value=(o=document.querySelector(t.target))!=null?o:void 0,c.value||X(W,`Target is not existed: ${t.target}`)):c.value=document.documentElement,r.value=ye(h.value,!0),u()}),ee(r,"scroll",E),te(C),n({update:C,updateRoot:u}),(o,P)=>(oe(),le("div",{ref_key:"root",ref:h,class:F(w(x).b()),style:$(w(_))},[ae("div",{class:F({[w(x).m("fixed")]:a.value}),style:$(w(T))},[se(o.$slots,"default")],6)],6))}});var be=ne(Ee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const Ne=ue(be),we=k({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ie},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ie={close:()=>!0},Ae=k({...we,appendToBody:{type:Boolean,default:!1},beforeClose:{type:L(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),De={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[U]:e=>A(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ke=(e,n)=>{const t=re().emit,{nextZIndex:x}=fe();let c="";const h=M(),r=M(),l=m(!1),i=m(!1),d=m(!1),p=m(e.zIndex||x());let f,u;const y=pe("namespace",de),a=B(()=>{const s={},v=`--${y.value}-dialog`;return e.fullscreen||(e.top&&(s[`${v}-margin-top`]=e.top),e.width&&(s[`${v}-width`]=q(e.width))),s}),b=B(()=>e.alignCenter?{display:"flex"}:{});function g(){t("opened")}function _(){t("closed"),t(U,!1),e.destroyOnClose&&(d.value=!1)}function T(){t("close")}function C(){u==null||u(),f==null||f(),e.openDelay&&e.openDelay>0?{stop:f}=V(()=>O(),e.openDelay):O()}function E(){f==null||f(),u==null||u(),e.closeDelay&&e.closeDelay>0?{stop:u}=V(()=>N(),e.closeDelay):N()}function o(){function s(v){v||(i.value=!0,l.value=!1)}e.beforeClose?e.beforeClose(s):E()}function P(){e.closeOnClickModal&&o()}function O(){ve&&(l.value=!0)}function N(){l.value=!1}function Z(){t("openAutoFocus")}function j(){t("closeAutoFocus")}function Y(s){var v;((v=s.detail)==null?void 0:v.focusReason)==="pointer"&&s.preventDefault()}e.lockScroll&&ge(l);function J(){e.closeOnPressEscape&&o()}return D(()=>e.modelValue,s=>{s?(i.value=!1,C(),d.value=!0,p.value=e.zIndex?p.value++:x(),ce(()=>{t("open"),n.value&&(n.value.scrollTop=0)})):l.value&&E()}),D(()=>e.fullscreen,s=>{n.value&&(s?(c=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=c)}),G(()=>{e.modelValue&&(l.value=!0,d.value=!0,C())}),{afterEnter:g,afterLeave:_,beforeLeave:T,handleClose:o,onModalClick:P,close:E,doClose:N,onOpenAutoFocus:Z,onCloseAutoFocus:j,onCloseRequested:J,onFocusoutPrevented:Y,titleId:h,bodyId:r,closed:i,style:a,overlayDialogStyle:b,rendered:d,visible:l,zIndex:p}};export{Ne as E,Ie as a,Ae as b,De as c,we as d,ke as u};
