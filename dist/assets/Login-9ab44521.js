import{d as k,x as E,N as h,p as V,aN as I,a as C,k as m,l as s,w as a,o as F,f as _,bv as L,bw as N,a7 as B,q as f,ao as U,A as g,am as q,an as K,m as R}from"./index-28534dab.js";import{a as S,E as A}from"./el-form-item-dada9908.js";import{E as D}from"./el-button-898efb30.js";/* empty css                 */import{E as w}from"./index-6cd4b727.js";import{E as M}from"./index-224d0693.js";import"./_Uint8Array-fe8e9237.js";import"./_initCloneObject-79471f07.js";import"./index-1e9469b0.js";const v=n=>(q("data-v-b32fa5a7"),n=n(),K(),n),$={class:"login"},z={class:"form-cls"},T=v(()=>m("div",{class:"title"},"学习宝",-1)),j=v(()=>m("div",{style:{"font-size":"14px","line-height":"32px","text-align":"center",color:"yellow"}},"书山有路勤为径，学海无涯苦作舟",-1)),G=k({__name:"Login",setup(n){const x=U(),e=E({user:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 5 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 10 个字符",trigger:"blur"}]}}),u=h(),p=t=>{t&&t.validate(o=>{if(o)g.login(e.user).then(r=>{g.storeUserInfo(r.data),x.push("/")}).catch(r=>{w.error(`用户名或密码错误，${r.code}`)});else return w.error("用户名或密码不符合规则"),!1})},y=()=>{e.user.username="",e.user.password=""},i=t=>{(t.keyCode==13||t.keyCode==100)&&p(u.value)};return V(()=>window.addEventListener("keydown",i)),I(()=>window.removeEventListener("keydown",i,!1)),(t,o)=>{const r=M,d=A,c=D,b=S;return F(),C("div",$,[m("div",z,[s(b,{ref_key:"ruleFormRef",ref:u,model:e.user,"status-icon":"",rules:e.rules},{default:a(()=>[T,j,s(d,{prop:"username"},{default:a(()=>[s(r,{modelValue:e.user.username,"onUpdate:modelValue":o[0]||(o[0]=l=>e.user.username=l),type:"text",autocomplete:"off","prefix-icon":_(L)},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,{prop:"password"},{default:a(()=>[s(r,{modelValue:e.user.password,"onUpdate:modelValue":o[1]||(o[1]=l=>e.user.password=l),type:"password",autocomplete:"off","prefix-icon":_(N),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(d,null,{default:a(()=>[s(c,{class:"login-btn",type:"primary",onClick:o[2]||(o[2]=l=>p(u.value)),onKeydown:B(i,["enter"])},{default:a(()=>[f("登录")]),_:1},8,["onKeydown"]),s(c,{class:"login-btn",onClick:y},{default:a(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}});const ee=R(G,[["__scopeId","data-v-b32fa5a7"]]);export{ee as default};
