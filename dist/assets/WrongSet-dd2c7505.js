import{d as k,u as E,j,r as m,e as S,A as B,o as f,m as I,b as r,$ as V,p as e,c as v,w as u,f as T,t as W,an as A,q as D,F as N,ao as Q,E as z,i as M,_ as F}from"./index-89aeeb22.js";import{Q as R}from"./QuestionDialog-8cc71ff7.js";/* empty css                 */import{E as L,a as G}from"./el-table-column-00f217c6.js";import"./el-tag-a9b17241.js";import{Q as H}from"./QuizCascader-d036046c.js";import{E as J}from"./index-fb0fe262.js";import{v as K}from"./directive-1618ec9e.js";import"./el-image-viewer-854bb0ac.js";import"./debounce-883dd20d.js";import"./isEqual-61dcd27d.js";import"./el-radio-group-9f69f746.js";/* empty css                        */const O=k({__name:"WrongSet",setup(P){const h=E();let p=j(!0);var x=m([]),g=m([]),i=m([]);const s=m([]);let t=m({drawerVisible:!1,subject:{id:0,name:""},grade:{id:0,name:""},volume:{id:0,name:""},qidx:-1});const w=(l,a,o)=>{t.subject=l,t.grade=a,t.volume=o,p.value=!0,t.qidx=-1,i.splice(0);var d=x.filter(n=>n.subject.id==l.id&&n.grade.id==a.id&&n.volume.id==o.id);i=g.filter(n=>d.some(c=>c.quiz.id==n.qz_id)),p.value=!1},b=l=>{t.qidx=l,t.drawerVisible=!0};S(()=>{B.getWrongSetsMixedBySubInfos().then(l=>{x=l.data.quizs,x.forEach(a=>{var o=s.findIndex(c=>c.v.id==a.subject.id);o<0&&(o=s.length,s.push({v:a.subject,children:[]}));var d=s[o].children.findIndex(c=>c.v.id==a.grade.id);d<0&&(d=s[o].children.length,s[o].children.push({v:a.grade,children:[]}));var n=s[o].children[d].children.findIndex(c=>c.id==a.volume.id);n<0&&(n=s[o].children[d].children.length,s[o].children[d].children.push(a.volume))}),g=l.data.questions,p.value=!1})});const q=()=>{Q.confirm(`开始【${t.subject.name}⭐${t.grade.name}⭐${t.volume.name}《错题集》】(60分钟)考试吗？`,"请确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.push({path:"/exam",query:{id:-1,name:"错题集",subject:t.subject.name,grade:t.grade.name,volume:t.volume.name,exam_seconds:60*60}})})},y=({row:l,rowIndex:a})=>a%2==0?"success-row":"";return(l,a)=>{const o=z,d=M,n=L,c=G,C=J,$=K;return f(),I(N,null,[r(H,{options:s,onClicked:w},null,8,["options"]),V((f(),v(c,{data:e(i),"row-class-name":y,border:"",style:{width:"100%",color:"darkslategray","font-size":"12px"}},{default:u(()=>[r(n,{fixed:"",lable:"序号",width:"32px",align:"center"},{default:u(_=>[r(d,{effect:"dark",content:"详情"},{default:u(()=>[r(o,{link:"",type:"primary",size:"small",onClick:U=>b(_.$index)},{default:u(()=>[T(W(_.$index+1),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1}),r(n,{prop:"qz_name",label:"试卷名",width:"88px",sortable:"","show-overflow-tooltip":"",align:"center"}),r(n,{prop:"type",label:"题型",width:"60px",sortable:"",align:"center"}),r(n,{prop:"title",label:"题目","show-overflow-tooltip":""}),r(n,{prop:"description",label:"描述","show-overflow-tooltip":""}),r(n,{prop:"level",label:"难度",width:"60px",sortable:"",align:"center"}),r(n,{prop:"wrong_times",label:"次数",width:"60px",sortable:"",align:"center"})]),_:1},8,["data"])),[[$,e(p)]]),e(i).length>0?(f(),v(C,{key:0,position:"bottom",offset:20},{default:u(()=>[r(d,{placement:"right",content:"错题考试"},{default:u(()=>[r(o,{type:"primary",icon:e(A),circle:"",onClick:q},null,8,["icon"])]),_:1})]),_:1})):D("",!0),r(R,{visible:e(t).drawerVisible,id:e(t).qidx>=0?e(i)[e(t).qidx].qid:0,wrong_times:e(t).qidx>=0?e(i)[e(t).qidx].wrong_times:0,is_favourited:e(t).qidx>=0?e(i)[e(t).qidx].is_favourited:!1,header:e(t).qidx>=0?`${e(i)[e(t).qidx].qid}.【${e(t).subject.name} | ${e(t).grade.name} | ${e(t).volume.name}】${e(i)[e(t).qidx].qz_name}`:"",title:e(t).qidx>=0?e(i)[e(t).qidx].title:"",image:e(t).qidx>=0?e(i)[e(t).qidx].image:"",description:e(t).qidx>=0?e(i)[e(t).qidx].description:"",analysis:e(t).qidx>=0?e(i)[e(t).qidx].analysis:"",answer:e(t).qidx>=0?e(i)[e(t).qidx].answer:"",userAnswer:e(t).qidx>=0?e(i)[e(t).qidx].user_answer:"",onClose:a[0]||(a[0]=_=>{e(i)[e(t).qidx].is_favourited=_,e(t).drawerVisible=!1})},null,8,["visible","id","wrong_times","is_favourited","header","title","image","description","analysis","answer","userAnswer"])],64)}}});const ce=F(O,[["__scopeId","data-v-4d592542"]]);export{ce as default};
