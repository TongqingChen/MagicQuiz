import{d as E,j as $,k as j,r as u,e as B,A as S,o as f,p as I,b as n,$ as V,u as e,c as g,w as m,f as T,an as W,q as A,F as D,ao as N,E as Q,i as z,_ as M}from"./index-e5e4a600.js";import{Q as F}from"./QuestionDialog-9240a86e.js";/* empty css                 */import{E as R,a as L}from"./el-table-column-3054f9a6.js";import"./el-tag-298d0148.js";import{Q as G}from"./QuizCascader-b074baf8.js";import{E as H}from"./index-f2b9d4fe.js";import{v as J}from"./directive-b12bfa49.js";import"./el-image-viewer-281876fc.js";import"./debounce-2e12e8c5.js";import"./el-radio-group-0f7419ac.js";/* empty css                        */const K=E({__name:"WrongSet",setup(O){const b=$();let p=j(!0);var _=u([]),v=u([]),o=u([]);const r=u([]);let t=u({drawerVisible:!1,subject:{id:0,name:""},grade:{id:0,name:""},volume:{id:0,name:""},qidx:-1});const h=(s,a,i)=>{t.subject=s,t.grade=a,t.volume=i,p.value=!0,o.splice(0);var l=_.filter(d=>d.subject.id==s.id&&d.grade.id==a.id&&d.volume.id==i.id);o=v.filter(d=>l.some(c=>c.quiz.id==d.qz_id)),p.value=!1},w=s=>{t.qidx=s,t.drawerVisible=!0};B(()=>{S.getWrongSetsMixedBySubInfos().then(s=>{_=s.data.quizs,_.forEach(a=>{var i=r.findIndex(c=>c.v.id==a.subject.id);i<0&&(i=r.length,r.push({v:a.subject,children:[]}));var l=r[i].children.findIndex(c=>c.v.id==a.grade.id);l<0&&(l=r[i].children.length,r[i].children.push({v:a.grade,children:[]}));var d=r[i].children[l].children.findIndex(c=>c.id==a.volume.id);d<0&&(d=r[i].children[l].children.length,r[i].children[l].children.push(a.volume))}),v=s.data.questions,p.value=!1})});const q=()=>{N.confirm(`开始【${t.subject.name}⭐${t.grade.name}⭐${t.volume.name}《错题集》】(60分钟)考试吗？`,"请确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b.push({path:"/exam",query:{id:-1,name:"错题集",subject:t.subject.name,grade:t.grade.name,volume:t.volume.name,exam_seconds:60*60}})})},y=({row:s,rowIndex:a})=>a%2==0?"success-row":"";return(s,a)=>{const i=R,l=Q,d=L,c=z,C=H,k=J;return f(),I(D,null,[n(G,{options:r,onClicked:h},null,8,["options"]),V((f(),g(d,{data:e(o),"row-class-name":y,border:"",style:{width:"100%",color:"darkslategray","font-size":"12px"}},{default:m(()=>[n(i,{fixed:"",type:"index",width:"32px"}),n(i,{prop:"qz_name",label:"试卷名",width:"88px",sortable:"","show-overflow-tooltip":""}),n(i,{prop:"type",label:"题型",width:"60px",sortable:""}),n(i,{prop:"title",label:"题目","show-overflow-tooltip":""}),n(i,{prop:"description",label:"描述","show-overflow-tooltip":""}),n(i,{prop:"level",label:"难度",width:"60px",sortable:""}),n(i,{prop:"record_times",label:"次数",width:"60px",sortable:""}),n(i,{fixed:"right",label:"查看",width:"40px"},{default:m(x=>[n(l,{link:"",type:"primary",size:"small",onClick:P=>w(x.$index)},{default:m(()=>[T("详情")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,e(p)]]),e(o).length>0?(f(),g(C,{key:0,position:"bottom",offset:20},{default:m(()=>[n(c,{placement:"right",content:"错题考试"},{default:m(()=>[n(l,{type:"primary",icon:e(W),circle:"",onClick:q},null,8,["icon"])]),_:1})]),_:1})):A("",!0),n(F,{visible:e(t).drawerVisible,id:e(t).qidx>=0?e(o)[e(t).qidx].qid:0,wrong_times:e(t).qidx>=0?e(o)[e(t).qidx].wrong_times:0,is_favourited:e(t).qidx>=0?e(o)[e(t).qidx].is_favourited:!1,header:e(t).qidx>=0?`${e(o)[e(t).qidx].qid}.【${e(t).subject.name} | ${e(t).grade.name} | ${e(t).volume.name}】${e(o)[e(t).qidx].qz_name}`:"",title:e(t).qidx>=0?e(o)[e(t).qidx].title:"",image:e(t).qidx>=0?e(o)[e(t).qidx].image:"",description:e(t).qidx>=0?e(o)[e(t).qidx].description:"",analysis:e(t).qidx>=0?e(o)[e(t).qidx].analysis:"",answer:e(t).qidx>=0?e(o)[e(t).qidx].answer:"",userAnswer:e(t).qidx>=0?e(o)[e(t).qidx].user_answer:"",onClose:a[0]||(a[0]=x=>{e(o)[e(t).qidx].is_favourited=x,e(t).drawerVisible=!1})},null,8,["visible","id","wrong_times","is_favourited","header","title","image","description","analysis","answer","userAnswer"])],64)}}});const le=M(K,[["__scopeId","data-v-795bf1ab"]]);export{le as default};
