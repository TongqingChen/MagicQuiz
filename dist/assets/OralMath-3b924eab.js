import{d as I,U as N,C as g,aq as k,ba as v,a as x,w as r,bc as B,bb as O,o as i,D as n,v as c,t as u,e as m,q as C,m as p,B as M,F as S,bd as V,bf as q,av as D}from"./index-d9119af0.js";import{E as F}from"./el-card-3b4b58ec.js";/* empty css                 */import{E as G}from"./el-button-86d0f62c.js";import{a as o,_ as H,c as L}from"./CountDown.vue_vue_type_script_setup_true_lang-617daccd.js";import{E as T}from"./index-8120f1da.js";import"./validator-dd6bb28f.js";const U={class:"q-body"},A={style:{margin:"3px"}},R={class:"question"},z=I({__name:"OralMath",setup(P){const e=N({id:0,name:"",state:o.IDLE,meta:[{title:"",answer:0,user_answer:0,mark:""}]}),d=B();g(()=>{e.id=Number(d.query.id),e.name=String(d.query.name),e.state=o.ONGOING,k.getOralMath(e.id).then(a=>{e.meta=[],a.data.forEach(t=>e.meta.push({title:t[0],answer:t[1],user_answer:0,mark:""}))})});const f=()=>{e.meta.forEach(a=>a.mark=a.answer==a.user_answer?"✅":"❌"),e.state=o.FINISHED};return v((a,t,s)=>{if(e.state!=o.ONGOING){s();return}L.confirm("正在考试中，离开页面数据将会丢失，考试中断！","确认离开吗？",{confirmButtonText:"继续考试",cancelButtonText:"确认离开",type:"warning",closeOnPressEscape:!1,distinguishCancelAndClose:!0}).then(l=>{s(!1)}).catch(l=>{l=="cancel"?s():s(!1)})}),(a,t)=>{const s=G,l=V,E=T,b=F,h=q,y=O;return i(),x(y,null,{default:r(()=>[n(l,null,{default:r(()=>[c("span",null,"【"+u(e.name)+"】",1),n(H,{style:{color:"red"},start_flag:!0,duration_secs:10,blink:!0,start_text:"【考试剩余】",onEnd_event:t[0]||(t[0]=()=>{})}),n(s,{link:"",type:"primary",disabled:e.state==m(o).FINISHED,onClick:f},{default:r(()=>[C("提交")]),_:1},8,["disabled"])]),_:1}),n(h,null,{default:r(()=>[c("div",U,[(i(!0),p(S,null,M(e.meta,_=>(i(),p("div",A,[n(b,null,{default:r(()=>[c("span",R,u(_.title),1),n(E,{modelValue:_.user_answer,"onUpdate:modelValue":w=>_.user_answer=w,max:999,clearable:"",type:"number",size:"small",disabled:e.state==m(o).FINISHED},null,8,["modelValue","onUpdate:modelValue","disabled"]),c("span",null,u(_.mark),1)]),_:2},1024)]))),256))])]),_:1})]),_:1})}}});const Y=D(z,[["__scopeId","data-v-16fa7ade"]]);export{Y as default};
