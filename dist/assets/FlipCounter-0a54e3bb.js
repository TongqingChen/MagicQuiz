import{_ as d,o as m,p as c,F as u,s as f,a as l,f as y,t as h,n as p,q as A}from"./index-4357d460.js";const _={data(){return{isIE:!1,timer:0,timeArray:this.split?new Array(this.type*2).fill("0"):new Array(this.type).fill("00"),timeArrayT:this.split?new Array(this.type*2).fill("0"):new Array(this.type).fill("00"),isAnimate:this.split?new Array(this.type*2).fill(!1):new Array(this.type).fill(!1)}},props:{seconds:{type:Number,default:10},type:{type:[Number,String],default:4},split:{type:Boolean,default:!0},stop:{type:Boolean,default:!1},timeUnit:{type:Array,default:()=>[]}},computed:{step(){return this.split?2:1},arr(){const e=this.timeArray.length,i=this.step,r=[e-1,e-i-1,e-i*2-1,e-i*3-1];return r.length=this.type>1?this.type:1,r},endTime(){return Date.now()+this.seconds*1e3}},watch:{timeArray(e,i){const r=[];e.forEach((a,s)=>{a!==i[s]&&(r.push({value:a,index:s}),this.isAnimate[s]=!0)}),setTimeout(()=>{r.forEach(a=>{this.timeArrayT[a.index]=a.value})},350)},endTime(e){e>0&&this.start(200)}},mounted(){(window.ActiveXObject||"ActiveXObject"in window||window.navigator.userAgent.indexOf("Edge")>-1)&&(this.isIE=!0),console.log("mounted...")},beforeUnmount(){console.log("beforeUnmount..."),clearTimeout(this.timer)},methods:{start(e=1e3){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{var i=(this.endTime-Date.now())/1e3;if(i<=0&&!this.stop){this.$emit("timeUp");return}var r=Math.floor(i/86400);i-=r*86400;var a=Math.floor(i/3600);i-=a*3600;var s=Math.floor(i/60);i-=s*60;var o=Math.floor(i);const n=Number(this.type);let t=[];this.split?(n>=4&&(t=String(r).padStart(2,"0").split("")),n>=3&&(t=t.concat(String(a).padStart(2,"0").split(""))),n>=2&&(t=t.concat(String(s).padStart(2,"0").split(""))),t=t.concat(String(o).padStart(2,"0").split(""))):(n>=4&&t.push(String(r).padStart(2,"0")),n>=3&&t.push(String(a).padStart(2,"0")),n>=2&&t.push(String(s).padStart(2,"0")),t.push(String(o).padStart(2,"0"))),this.timeArray=t,!this.stop&&this.start()},e)},onAnimateEnd(e){this.isAnimate[e]=!1},isTimeUnitShow(e){return this.arr.includes(e)&&(e!=this.timeArray.length-1||this.timeUnit[3])},setTimeUnit(e){switch(e){case this.timeArray.length-1:return this.timeUnit[3]||"";case this.timeArray.length-this.step-1:return this.timeUnit[2]||"";case this.timeArray.length-this.step*2-1:return this.timeUnit[1]||"";default:return this.timeUnit[0]||""}}}},g={class:p(["time-box"])},v={class:"base"},S={class:"base-b"},w=["onAnimationend"];function T(e,i,r,a,s,o){return m(),c("div",{class:p(["vue-countdown-component",{theme2:r.split},{ie:s.isIE}])},[(m(!0),c(u,null,f(s.timeArray,(n,t)=>(m(),c(u,{key:t},[l("div",g,[l("div",v,[y(h(n),1),l("div",S,h(s.timeArrayT[t]),1)]),l("div",{class:p(["face",{anime:s.isAnimate[t]}]),onAnimationend:U=>o.onAnimateEnd(t)},h(s.timeArrayT[t]),43,w),l("div",{class:p(["back",{anime:s.isAnimate[t]}])},h(n),3)]),o.isTimeUnitShow(t)?(m(),c("div",{class:"time-unit",key:`unit-${t}`},h(o.setTimeUnit(t)),1)):A("",!0)],64))),128))],2)}const E=d(_,[["render",T],["__scopeId","data-v-a0e287cf"]]);export{E as F};
