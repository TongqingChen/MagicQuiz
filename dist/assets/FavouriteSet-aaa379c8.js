import{d as z,j as I,k as N,r as w,e as A,A as x,o as c,p as v,a as q,b as t,w as s,F as g,s as D,c as m,f,t as h,u as d,W as R,aS as M,q as Q,aT as y,l as W,E as L,i as O,aU as U,aV as G,_ as H}from"./index-4357d460.js";import{Q as J}from"./QuestionDialog-1f819e13.js";/* empty css                 */import{E as K,a as P}from"./el-table-column-a782e6d2.js";import"./el-tag-295c830a.js";import{E as X,a as Y}from"./el-radio-group-3c412ddf.js";/* empty css                        */import{W as Z}from"./http-f1fd749e.js";import{E as ee}from"./index-64011dd0.js";import{v as te}from"./directive-a56b1257.js";import"./el-image-viewer-b7e97dd6.js";import"./debounce-63dc6fc2.js";import"./index-abd42a8b.js";const oe=u=>(U("data-v-fc3eb3e6"),u=u(),G(),u),ae={class:"subject"},se=oe(()=>q("span",null,"科目：",-1)),ne=z({__name:"FavouriteSet",setup(u){const E=I();let b=N(!0);var i=w({});const e=w({subject:"",drawerVisible:!1,q:new Z}),j=a=>{e.q=i[e.subject][a],e.drawerVisible=!0},k=a=>{e.q=i[e.subject][a],y.confirm(`从收藏集里删除本题【${e.q.title.substring(0,10)}...】吗？`,"请确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await x.deleteFavouriteQuestion(e.q.qid).then(async o=>{console.log(o),W({message:"删除成功.",type:"success"})})})};A(()=>{x.getFavouriteSetsBySubName().then(a=>{var o=Object.keys(a.data);o.forEach(r=>{a.data[r].length>0&&(i[r]=a.data[r])}),o=Object.keys(i),o.length>0&&(e.subject=o[0]),b.value=!1})});const S=()=>{y.confirm(`开始【${e.subject}《收藏题集》】(60分钟)考试吗？`,"请确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{E.push({path:"/exam",query:{id:-3,name:"收藏题集",sub_name:e.subject,exam_seconds:60*60}})})},C=({row:a,rowIndex:o})=>o%2==0?"success-row":"";return(a,o)=>{const r=X,B=Y,n=K,_=L,V=P,$=O,F=ee,T=te;return c(),v(g,null,[q("div",ae,[se,t(B,{modelValue:e.subject,"onUpdate:modelValue":o[0]||(o[0]=l=>e.subject=l),size:"small"},{default:s(()=>[(c(!0),v(g,null,D(d(i),(l,p)=>(c(),m(r,{label:p},{default:s(()=>[f(h(p)+"("+h(l.length)+")",1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),R((c(),m(V,{data:d(i)[e.subject],"row-class-name":C,border:"",style:{width:"100%",color:"darkslategray","font-size":"13px"}},{default:s(()=>[t(n,{fixed:"",type:"index",width:"32px"}),t(n,{prop:"quiz_name",label:"试卷名",width:"88px",sortable:"","show-overflow-tooltip":""}),t(n,{prop:"type",label:"题型",width:"60px",sortable:""}),t(n,{prop:"title",label:"题目","show-overflow-tooltip":""}),t(n,{prop:"description",label:"描述","show-overflow-tooltip":""}),t(n,{prop:"level",label:"难度",width:"60px",sortable:""}),t(n,{fixed:"right",label:"查看",width:"40px"},{default:s(l=>[t(_,{link:"",type:"primary",size:"small",onClick:p=>j(l.$index)},{default:s(()=>[f("详情")]),_:2},1032,["onClick"])]),_:1}),t(n,{fixed:"right",label:"删除",width:"40px"},{default:s(l=>[t(_,{link:"",type:"primary",size:"small",onClick:p=>k(l.$index)},{default:s(()=>[f("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,d(b)]]),e.subject.length>0?(c(),m(F,{key:0,position:"bottom",offset:20},{default:s(()=>[t($,{placement:"right",content:"收藏题考试"},{default:s(()=>[t(_,{type:"primary",icon:d(M),circle:"",onClick:S},null,8,["icon"])]),_:1})]),_:1})):Q("",!0),t(J,{visible:e.drawerVisible,header:`${e.q.qid}.【${e.subject}】${e.q.quiz_name}`,title:e.q.title,image:e.q.image,description:e.q.description,analysis:e.q.analysis,answer:e.q.answer,userAnswer:e.q.user_answer,onClose:o[1]||(o[1]=l=>e.drawerVisible=!1)},null,8,["visible","header","title","image","description","analysis","answer","userAnswer"])],64)}}});const ve=H(ne,[["__scopeId","data-v-fc3eb3e6"]]);export{ve as default};
