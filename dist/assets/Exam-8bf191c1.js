var Xe=Object.defineProperty;var Qe=(o,l,e)=>l in o?Xe(o,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[l]=e;var he=(o,l,e)=>(Qe(o,typeof l!="symbol"?l+"":l,e),e);import{i as te,b as de,j as X,d as R,y as fe,r as se,u as _e,c as k,l as ue,o as f,m as I,D as d,w as m,X as Le,v as C,n as _,e as t,t as T,Y as Oe,T as Te,_ as ve,h as be,s as h,f as pe,ai as Se,aT as $e,aU as qe,aV as Ue,aN as We,x as S,aW as Ze,a0 as Ke,W as Me,C as we,a as $,N as De,O as P,M as Je,F as le,ao as Ge,ap as et,aX as tt,aY as st,g as Ve,aZ as nt,a_ as at,B as Ee,a$ as ot,aP as oe,a5 as ae,b0 as lt,b1 as rt,b2 as it,aS as Pe,a6 as Ne,P as ut,b3 as ct,b4 as Be,Z as dt,b5 as mt,b6 as ft,b7 as He,k as xe,b8 as Ae,b9 as pt,U as Ce,ba as vt,aq as ke,bb as gt,q as V,bc as yt,bd as _t,be as bt,ad as wt,bf as ht,av as Ct}from"./index-d9119af0.js";import{d as kt,E as It,c as Et,a as Nt}from"./el-radio-group-3d9c4b52.js";import{i as xt,v as zt,z as Lt,b as Fe,A as Ot,B as Tt,E as St,D as $t}from"./el-button-86d0f62c.js";import{E as Bt,a as j,Q as Y,b as At,_ as Rt,c as Re}from"./CountDown.vue_vue_type_script_setup_true_lang-617daccd.js";import{u as Mt}from"./index-8120f1da.js";import{g as Dt}from"./validator-dd6bb28f.js";const Gt=(o,l)=>{if(!te||!o||!l)return!1;const e=o.getBoundingClientRect();let n;return l instanceof Element?n=l.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},e.top<n.bottom&&e.bottom>n.top&&e.right>n.left&&e.left<n.right};var Vt="Expected a function";function Ie(o,l,e){var n=!0,r=!0;if(typeof o!="function")throw new TypeError(Vt);return xt(e)&&(n="leading"in e?!!e.leading:n,r="trailing"in e?!!e.trailing:r),kt(o,l,{leading:n,maxWait:l,trailing:r})}const Pt=de({a11y:{type:Boolean,default:!0},locale:{type:X(Object)},size:zt,button:{type:X(Object)},experimentalFeatures:{type:X(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:X(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),ze={};R({name:"ElConfigProvider",props:Pt,setup(o,{slots:l}){fe(()=>o.message,n=>{Object.assign(ze,n??{})},{immediate:!0,deep:!0});const e=Lt(o);return()=>se(l,"default",{config:e==null?void 0:e.value})}});const Ht=de({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Ft=["textContent"],jt=R({name:"ElBadge"}),Yt=R({...jt,props:Ht,setup(o,{expose:l}){const e=o,n=_e("badge"),r=k(()=>e.isDot?"":ue(e.value)&&ue(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return l({content:r}),(g,a)=>(f(),I("div",{class:_(t(n).b())},[se(g.$slots,"default"),d(Te,{name:`${t(n).namespace.value}-zoom-in-center`,persisted:""},{default:m(()=>[Le(C("sup",{class:_([t(n).e("content"),t(n).em("content",g.type),t(n).is("fixed",!!g.$slots.default),t(n).is("dot",g.isDot)]),textContent:T(t(r))},null,10,Ft),[[Oe,!g.hidden&&(t(r)||g.isDot)]])]),_:1},8,["name"])],2))}});var Xt=ve(Yt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const Qt=be(Xt),qt=de({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:X(String),default:"solid"}}),Ut=R({name:"ElDivider"}),Wt=R({...Ut,props:qt,setup(o){const l=o,e=_e("divider"),n=k(()=>e.cssVar({"border-style":l.borderStyle}));return(r,g)=>(f(),I("div",{class:_([t(e).b(),t(e).m(r.direction)]),style:pe(t(n)),role:"separator"},[r.$slots.default&&r.direction!=="vertical"?(f(),I("div",{key:0,class:_([t(e).e("text"),t(e).is(r.contentPosition)])},[se(r.$slots,"default")],2)):h("v-if",!0)],6))}});var Zt=ve(Wt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const Kt=be(Zt),Jt=de({urlList:{type:X(Array),default:()=>Se([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),es={close:()=>!0,switch:o=>ue(o)},ts=["src"],ss=R({name:"ElImageViewer"}),ns=R({...ss,props:Jt,emits:es,setup(o,{expose:l,emit:e}){const n=o,r={CONTAIN:{name:"contain",icon:$e(qe)},ORIGINAL:{name:"original",icon:$e(Ue)}},{t:g}=Fe(),a=_e("image-viewer"),{nextZIndex:L}=We(),N=S(),x=S([]),z=Ze(),y=S(!0),i=S(n.initialIndex),p=Ke(r.CONTAIN),u=S({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),M=k(()=>{const{urlList:s}=n;return s.length<=1}),b=k(()=>i.value===0),Z=k(()=>i.value===n.urlList.length-1),ne=k(()=>n.urlList[i.value]),D=k(()=>{const{scale:s,deg:c,offsetX:w,offsetY:A,enableTransition:U}=u.value;let G=w/s,W=A/s;switch(c%360){case 90:case-270:[G,W]=[W,-G];break;case 180:case-180:[G,W]=[-G,-W];break;case 270:case-90:[G,W]=[-W,G];break}const ie={transform:`scale(${s}) rotate(${c}deg) translate(${G}px, ${W}px)`,transition:U?"transform .3s":""};return p.value.name===r.CONTAIN.name&&(ie.maxWidth=ie.maxHeight="100%"),ie}),K=k(()=>ue(n.zIndex)?n.zIndex:L());function E(){v(),e("close")}function F(){const s=Ie(w=>{switch(w.code){case ae.esc:n.closeOnPressEscape&&E();break;case ae.space:re();break;case ae.left:ge();break;case ae.up:q("zoomIn");break;case ae.right:ye();break;case ae.down:q("zoomOut");break}}),c=Ie(w=>{const A=w.deltaY||w.deltaX;q(A<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});z.run(()=>{oe(document,"keydown",s),oe(document,"wheel",c)})}function v(){z.stop()}function J(){y.value=!1}function ee(s){y.value=!1,s.target.alt=g("el.image.error")}function B(s){if(y.value||s.button!==0||!N.value)return;u.value.enableTransition=!1;const{offsetX:c,offsetY:w}=u.value,A=s.pageX,U=s.pageY,G=Ie(ie=>{u.value={...u.value,offsetX:c+ie.pageX-A,offsetY:w+ie.pageY-U}}),W=oe(document,"mousemove",G);oe(document,"mouseup",()=>{W()}),s.preventDefault()}function Q(){u.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function re(){if(y.value)return;const s=Ot(r),c=Object.values(r),w=p.value.name,U=(c.findIndex(G=>G.name===w)+1)%s.length;p.value=r[s[U]],Q()}function me(s){const c=n.urlList.length;i.value=(s+c)%c}function ge(){b.value&&!n.infinite||me(i.value-1)}function ye(){Z.value&&!n.infinite||me(i.value+1)}function q(s,c={}){if(y.value)return;const{zoomRate:w,rotateDeg:A,enableTransition:U}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...c};switch(s){case"zoomOut":u.value.scale>.2&&(u.value.scale=Number.parseFloat((u.value.scale/w).toFixed(3)));break;case"zoomIn":u.value.scale<7&&(u.value.scale=Number.parseFloat((u.value.scale*w).toFixed(3)));break;case"clockwise":u.value.deg+=A;break;case"anticlockwise":u.value.deg-=A;break}u.value.enableTransition=U}return fe(ne,()=>{Me(()=>{const s=x.value[0];s!=null&&s.complete||(y.value=!0)})}),fe(i,s=>{Q(),e("switch",s)}),we(()=>{var s,c;F(),(c=(s=N.value)==null?void 0:s.focus)==null||c.call(s)}),l({setActiveItem:me}),(s,c)=>(f(),$(ot,{to:"body",disabled:!s.teleported},[d(Te,{name:"viewer-fade",appear:""},{default:m(()=>[C("div",{ref_key:"wrapper",ref:N,tabindex:-1,class:_(t(a).e("wrapper")),style:pe({zIndex:t(K)})},[C("div",{class:_(t(a).e("mask")),onClick:c[0]||(c[0]=De(w=>s.hideOnClickModal&&E(),["self"]))},null,2),h(" CLOSE "),C("span",{class:_([t(a).e("btn"),t(a).e("close")]),onClick:E},[d(t(P),null,{default:m(()=>[d(t(Je))]),_:1})],2),h(" ARROW "),t(M)?h("v-if",!0):(f(),I(le,{key:0},[C("span",{class:_([t(a).e("btn"),t(a).e("prev"),t(a).is("disabled",!s.infinite&&t(b))]),onClick:ge},[d(t(P),null,{default:m(()=>[d(t(Ge))]),_:1})],2),C("span",{class:_([t(a).e("btn"),t(a).e("next"),t(a).is("disabled",!s.infinite&&t(Z))]),onClick:ye},[d(t(P),null,{default:m(()=>[d(t(et))]),_:1})],2)],64)),h(" ACTIONS "),C("div",{class:_([t(a).e("btn"),t(a).e("actions")])},[C("div",{class:_(t(a).e("actions__inner"))},[d(t(P),{onClick:c[1]||(c[1]=w=>q("zoomOut"))},{default:m(()=>[d(t(tt))]),_:1}),d(t(P),{onClick:c[2]||(c[2]=w=>q("zoomIn"))},{default:m(()=>[d(t(st))]),_:1}),C("i",{class:_(t(a).e("actions__divider"))},null,2),d(t(P),{onClick:re},{default:m(()=>[(f(),$(Ve(t(p).icon)))]),_:1}),C("i",{class:_(t(a).e("actions__divider"))},null,2),d(t(P),{onClick:c[3]||(c[3]=w=>q("anticlockwise"))},{default:m(()=>[d(t(nt))]),_:1}),d(t(P),{onClick:c[4]||(c[4]=w=>q("clockwise"))},{default:m(()=>[d(t(at))]),_:1})],2)],2),h(" CANVAS "),C("div",{class:_(t(a).e("canvas"))},[(f(!0),I(le,null,Ee(s.urlList,(w,A)=>Le((f(),I("img",{ref_for:!0,ref:U=>x.value[A]=U,key:w,src:w,style:pe(t(D)),class:_(t(a).e("img")),onLoad:J,onError:ee,onMousedown:B},null,46,ts)),[[Oe,A===i.value]])),128))],2),se(s.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var as=ve(ns,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const os=be(as),ls=de({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:X([String,Object])},previewSrcList:{type:X(Array),default:()=>Se([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),rs={load:o=>o instanceof Event,error:o=>o instanceof Event,switch:o=>ue(o),close:()=>!0,show:()=>!0},is=["src","loading"],us={key:0},cs=R({name:"ElImage",inheritAttrs:!1}),ds=R({...cs,props:ls,emits:rs,setup(o,{emit:l}){const e=o;let n="";const{t:r}=Fe(),g=_e("image"),a=lt(),L=Mt(),N=S(),x=S(!1),z=S(!0),y=S(!1),i=S(),p=S(),u=te&&"loading"in HTMLImageElement.prototype;let M,b;const Z=k(()=>a.style),ne=k(()=>{const{fit:s}=e;return te&&s?{objectFit:s}:{}}),D=k(()=>{const{previewSrcList:s}=e;return Array.isArray(s)&&s.length>0}),K=k(()=>{const{previewSrcList:s,initialIndex:c}=e;let w=c;return c>s.length-1&&(w=0),w}),E=k(()=>e.loading==="eager"?!1:!u&&e.loading==="lazy"||e.lazy),F=()=>{te&&(z.value=!0,x.value=!1,N.value=e.src)};function v(s){z.value=!1,x.value=!1,l("load",s)}function J(s){z.value=!1,x.value=!0,l("error",s)}function ee(){Gt(i.value,p.value)&&(F(),re())}const B=rt(ee,200);async function Q(){var s;if(!te)return;await Me();const{scrollContainer:c}=e;Pe(c)?p.value=c:Ne(c)&&c!==""?p.value=(s=document.querySelector(c))!=null?s:void 0:i.value&&(p.value=Dt(i.value)),p.value&&(M=oe(p,"scroll",B),setTimeout(()=>ee(),100))}function re(){!te||!p.value||!B||(M==null||M(),p.value=void 0)}function me(s){if(s.ctrlKey){if(s.deltaY<0)return s.preventDefault(),!1;if(s.deltaY>0)return s.preventDefault(),!1}}function ge(){D.value&&(b=oe("wheel",me,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",y.value=!0,l("show"))}function ye(){b==null||b(),document.body.style.overflow=n,y.value=!1,l("close")}function q(s){l("switch",s)}return fe(()=>e.src,()=>{E.value?(z.value=!0,x.value=!1,re(),Q()):F()}),we(()=>{E.value?Q():F()}),(s,c)=>(f(),I("div",{ref_key:"container",ref:i,class:_([t(g).b(),s.$attrs.class]),style:pe(t(Z))},[x.value?se(s.$slots,"error",{key:0},()=>[C("div",{class:_(t(g).e("error"))},T(t(r)("el.image.error")),3)]):(f(),I(le,{key:1},[N.value!==void 0?(f(),I("img",it({key:0},t(L),{src:N.value,loading:s.loading,style:t(ne),class:[t(g).e("inner"),t(D)&&t(g).e("preview"),z.value&&t(g).is("loading")],onClick:ge,onLoad:v,onError:J}),null,16,is)):h("v-if",!0),z.value?(f(),I("div",{key:1,class:_(t(g).e("wrapper"))},[se(s.$slots,"placeholder",{},()=>[C("div",{class:_(t(g).e("placeholder"))},null,2)])],2)):h("v-if",!0)],64)),t(D)?(f(),I(le,{key:2},[y.value?(f(),$(t(os),{key:0,"z-index":s.zIndex,"initial-index":t(K),infinite:s.infinite,"zoom-rate":s.zoomRate,"url-list":s.previewSrcList,"hide-on-click-modal":s.hideOnClickModal,teleported:s.previewTeleported,"close-on-press-escape":s.closeOnPressEscape,onClose:ye,onSwitch:q},{default:m(()=>[s.$slots.viewer?(f(),I("div",us,[se(s.$slots,"viewer")])):h("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):h("v-if",!0)],64)):h("v-if",!0)],6))}});var ms=ve(ds,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const fs=be(ms),je=["success","info","warning","error"],O=Se({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:te?document.body:void 0}),ps=de({customClass:{type:String,default:O.customClass},center:{type:Boolean,default:O.center},dangerouslyUseHTMLString:{type:Boolean,default:O.dangerouslyUseHTMLString},duration:{type:Number,default:O.duration},icon:{type:ut,default:O.icon},id:{type:String,default:O.id},message:{type:X([String,Object,Function]),default:O.message},onClose:{type:X(Function),required:!1},showClose:{type:Boolean,default:O.showClose},type:{type:String,values:je,default:O.type},offset:{type:Number,default:O.offset},zIndex:{type:Number,default:O.zIndex},grouping:{type:Boolean,default:O.grouping},repeatNum:{type:Number,default:O.repeatNum}}),vs={destroy:()=>!0},H=ct([]),gs=o=>{const l=H.findIndex(r=>r.id===o),e=H[l];let n;return l>0&&(n=H[l-1]),{current:e,prev:n}},ys=o=>{const{prev:l}=gs(o);return l?l.vm.exposed.bottom.value:0},_s=(o,l)=>H.findIndex(n=>n.id===o)>0?20:l,bs=["id"],ws=["innerHTML"],hs=R({name:"ElMessage"}),Cs=R({...hs,props:ps,emits:vs,setup(o,{expose:l}){const e=o,{Close:n}=mt,{ns:r,zIndex:g}=Tt("message"),{currentZIndex:a,nextZIndex:L}=g,N=S(),x=S(!1),z=S(0);let y;const i=k(()=>e.type?e.type==="error"?"danger":e.type:"info"),p=k(()=>{const v=e.type;return{[r.bm("icon",v)]:v&&Be[v]}}),u=k(()=>e.icon||Be[e.type]||""),M=k(()=>ys(e.id)),b=k(()=>_s(e.id,e.offset)+M.value),Z=k(()=>z.value+b.value),ne=k(()=>({top:`${b.value}px`,zIndex:a.value}));function D(){e.duration!==0&&({stop:y}=ft(()=>{E()},e.duration))}function K(){y==null||y()}function E(){x.value=!1}function F({code:v}){v===ae.esc&&E()}return we(()=>{D(),L(),x.value=!0}),fe(()=>e.repeatNum,()=>{K(),D()}),oe(document,"keydown",F),dt(N,()=>{z.value=N.value.getBoundingClientRect().height}),l({visible:x,bottom:Z,close:E}),(v,J)=>(f(),$(Te,{name:t(r).b("fade"),onBeforeLeave:v.onClose,onAfterLeave:J[0]||(J[0]=ee=>v.$emit("destroy")),persisted:""},{default:m(()=>[Le(C("div",{id:v.id,ref_key:"messageRef",ref:N,class:_([t(r).b(),{[t(r).m(v.type)]:v.type&&!v.icon},t(r).is("center",v.center),t(r).is("closable",v.showClose),v.customClass]),style:pe(t(ne)),role:"alert",onMouseenter:K,onMouseleave:D},[v.repeatNum>1?(f(),$(t(Qt),{key:0,value:v.repeatNum,type:t(i),class:_(t(r).e("badge"))},null,8,["value","type","class"])):h("v-if",!0),t(u)?(f(),$(t(P),{key:1,class:_([t(r).e("icon"),t(p)])},{default:m(()=>[(f(),$(Ve(t(u))))]),_:1},8,["class"])):h("v-if",!0),se(v.$slots,"default",{},()=>[v.dangerouslyUseHTMLString?(f(),I(le,{key:1},[h(" Caution here, message could've been compromised, never use user's input as message "),C("p",{class:_(t(r).e("content")),innerHTML:v.message},null,10,ws)],2112)):(f(),I("p",{key:0,class:_(t(r).e("content"))},T(v.message),3))]),v.showClose?(f(),$(t(P),{key:2,class:_(t(r).e("closeBtn")),onClick:De(E,["stop"])},{default:m(()=>[d(t(n))]),_:1},8,["class","onClick"])):h("v-if",!0)],46,bs),[[Oe,x.value]])]),_:3},8,["name","onBeforeLeave"]))}});var ks=ve(Cs,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Is=1;const Ye=o=>{const l=!o||Ne(o)||He(o)||xe(o)?{message:o}:o,e={...O,...l};if(!e.appendTo)e.appendTo=document.body;else if(Ne(e.appendTo)){let n=document.querySelector(e.appendTo);Pe(n)||(n=document.body),e.appendTo=n}return e},Es=o=>{const l=H.indexOf(o);if(l===-1)return;H.splice(l,1);const{handler:e}=o;e.close()},Ns=({appendTo:o,...l},e)=>{const n=`message_${Is++}`,r=l.onClose,g=document.createElement("div"),a={...l,id:n,onClose:()=>{r==null||r(),Es(z)},onDestroy:()=>{Ae(null,g)}},L=d(ks,a,xe(a.message)||He(a.message)?{default:xe(a.message)?a.message:()=>a.message}:null);L.appContext=e||ce._context,Ae(L,g),o.appendChild(g.firstElementChild);const N=L.component,z={id:n,vnode:L,vm:N,handler:{close:()=>{N.exposed.visible.value=!1}},props:L.component.props};return z},ce=(o={},l)=>{if(!te)return{close:()=>{}};if(ue(ze.max)&&H.length>=ze.max)return{close:()=>{}};const e=Ye(o);if(e.grouping&&H.length){const r=H.find(({vnode:g})=>{var a;return((a=g.props)==null?void 0:a.message)===e.message});if(r)return r.props.repeatNum+=1,r.props.type=e.type,r.handler}const n=Ns(e,l);return H.push(n),n.handler};je.forEach(o=>{ce[o]=(l={},e)=>{const n=Ye(l);return ce({...n,type:o},e)}});function xs(o){for(const l of H)(!o||o===l.props.type)&&l.handler.close()}ce.closeAll=xs;ce._context=null;const zs=pt(ce,"$message");class Ls{constructor(){he(this,"meta",{user:0,quiz:0,rel_score:0,abs_score:0,use_minutes:0,note:""});he(this,"questions",[])}}const Os={style:{margin:"5px"}},Ts={class:"question-zone"},Ss={style:{"padding-left":"10px","padding-top":"5px"}},$s={key:0,class:"answer"},Bs={key:1,class:"answer"},As={class:"question"},Rs={key:0,class:"title"},Ms=R({__name:"Exam",setup(o){const l=yt(),e=Ce(new Bt);let n=Ce([[0,0]]);const r=()=>{e.id=Number(l.query.id),e.state=j.IDLE,e.start_time=Date.now(),e.name=String(l.query.name),e.subjectId=Number(l.query.subjectId),e.subjectName=String(l.query.subjectName),e.exam_seconds=Number(l.query.exam_seconds),ke.getQuestionListByQuizId(e.id).then(y=>{let i=y.data.results;e.meta=[{typeId:Y.CHOICE,typeName:"选择",icon:"Message",qList:[]},{typeId:Y.LOGIC,typeName:"判断",icon:"Setttings",qList:[]},{typeId:Y.CODING,typeName:"编程",icon:"Menu",qList:[]}],e.scores=0,n=[];var p=0;i.forEach(u=>{n.push([u.type,e.meta[u.type].qList.length]),e.meta[u.type].qList.push({index:p++,id:u.id,type:u.type,title:u.title,description:u.description,image:u.image,answer:u.answer,displayType:"default",userAnswer:"未作答",score:u.score}),e.scores+=u.score}),e.state=j.ONGOING})},g=()=>{x()};we(()=>{r()}),vt((y,i,p)=>{if(e.state!=j.ONGOING){p();return}Re.confirm("正在考试中，离开页面数据将会丢失，考试中断！","确认离开吗？",{confirmButtonText:"继续考试",cancelButtonText:"确认离开",type:"warning",closeOnPressEscape:!1,distinguishCancelAndClose:!0}).then(u=>{p(!1)}).catch(u=>{u=="cancel"?p():p(!1)})});const a=Ce({meta:new At,answers:["","",""]}),L=y=>{let i=e.meta[n[y][0]].qList[n[y][1]];a.meta=i,a.answers[a.meta.type]=i.userAnswer},N=()=>{if(a.meta.index>=0&&e.state==j.ONGOING){var y=n[a.meta.index][0],i=n[a.meta.index][1];e.meta[y].qList[i].userAnswer=a.answers[a.meta.type],e.meta[y].qList[i].displayType="primary"}},x=async()=>{var y=Number(localStorage.getItem("user_id")),i=new Ls,p=0,u=[0,0,0];e.meta.forEach(M=>{M.qList.forEach(b=>{b.displayType=b.userAnswer==b.answer?"success":"danger",b.userAnswer==b.answer&&(i.meta.abs_score+=b.score,u[b.type]++),b.type!=Y.CODING&&(p+=b.score,i.questions.push({user:y,question:b.id,is_correct:b.userAnswer==b.answer}))})}),i.meta.note=`选择: ${u[Y.CHOICE]}/${e.meta[Y.CHOICE].qList.length}, 判断: ${u[Y.LOGIC]}/${e.meta[Y.LOGIC].qList.length}`,i.meta.user=y,i.meta.quiz=e.id,i.meta.rel_score=Math.round(i.meta.abs_score*100/p),i.meta.use_minutes=Math.round((Date.now()-e.start_time)/1e3/60),console.log("resluts",i),await ke.postQuestionsResult(i.questions),await ke.postQuizResult(i.meta),e.state=j.FINISHED},z=()=>{Re.confirm("确定提交并结束考试吗？","请确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await x(),zs({type:"success",message:"Delete completed"})})};return(y,i)=>{const p=St,u=_t,M=Kt,b=It,Z=bt,ne=wt("ArrowRight"),D=P,K=$t,E=Et,F=Nt,v=fs,J=ht,ee=gt;return f(),$(ee,{class:"layout-container-exam",style:{height:"100%"}},{default:m(()=>[d(u,null,{default:m(()=>[C("span",null,"【"+T(e.subjectName)+"】"+T(e.name)+"【总分: "+T(e.scores)+"】",1),d(Rt,{style:{color:"red"},start_flag:e.state==t(j).ONGOING,duration_secs:e.exam_seconds,blink:!0,start_text:"【考试剩余】",onEnd_event:g},null,8,["start_flag","duration_secs"]),d(p,{link:"",type:"primary",disabled:e.state!=t(j).ONGOING,onClick:z},{default:m(()=>[V("提交")]),_:1},8,["disabled"])]),_:1}),d(ee,null,{default:m(()=>[d(Z,{width:"170px"},{default:m(()=>[d(b,{style:{height:"100%"}},{default:m(()=>[(f(!0),I(le,null,Ee(e.meta,B=>(f(),I("div",Os,[d(M,null,{default:m(()=>[V(T(B.typeName),1)]),_:2},1024),C("div",Ts,[(f(!0),I(le,null,Ee(B.qList,Q=>(f(),$(p,{type:Q.displayType,class:"question-button",onClick:re=>L(Q.index)},{default:m(()=>[V(T(Q.index+1),1)]),_:2},1032,["type","onClick"]))),256))])]))),256))]),_:1})]),_:1}),d(J,null,{default:m(()=>[C("div",Ss,[a.meta.index>=0?(f(),I("div",$s,"【考生答案】"+T(a.meta.userAnswer),1)):h("",!0),e.state==t(j).FINISHED&&a.meta.index>=0?(f(),I("div",Bs," 【正确答案】"+T(a.meta.answer),1)):h("",!0),a.meta.index>=0?(f(),$(K,{key:2},{default:m(()=>[d(p,{disabled:a.meta.index==0,type:"primary",icon:t(Ge),size:"small",onClick:i[0]||(i[0]=B=>L(a.meta.index-1))},{default:m(()=>[V("上一题")]),_:1},8,["disabled","icon"]),d(p,{disabled:a.meta.index==t(n).length-1,type:"primary",size:"small",onClick:i[1]||(i[1]=B=>L(a.meta.index+1))},{default:m(()=>[V("下一题"),d(D,{class:"el-icon--right"},{default:m(()=>[d(ne)]),_:1})]),_:1},8,["disabled"])]),_:1})):h("",!0),a.meta.type==t(Y).CHOICE&&e.state==t(j).ONGOING?(f(),$(F,{key:3,modelValue:a.answers[0],"onUpdate:modelValue":i[2]||(i[2]=B=>a.answers[0]=B),onChange:N},{default:m(()=>[d(E,{label:"A",size:"small"},{default:m(()=>[V("A")]),_:1}),d(E,{label:"B",size:"small"},{default:m(()=>[V("B")]),_:1}),d(E,{label:"C",size:"small"},{default:m(()=>[V("C")]),_:1}),d(E,{label:"D",size:"small"},{default:m(()=>[V("D")]),_:1})]),_:1},8,["modelValue"])):h("",!0),a.meta.type==t(Y).LOGIC&&e.state==t(j).ONGOING?(f(),$(F,{key:4,modelValue:a.answers[1],"onUpdate:modelValue":i[3]||(i[3]=B=>a.answers[1]=B),onChange:N},{default:m(()=>[d(E,{label:"T",size:"small"},{default:m(()=>[V("正确")]),_:1}),d(E,{label:"F",size:"small"},{default:m(()=>[V("错误")]),_:1})]),_:1},8,["modelValue"])):h("",!0)]),C("div",As,[a.meta.index>=0?(f(),I("div",Rs,T(a.meta.index+1)+". ("+T(a.meta.score)+"分)"+T(a.meta.title),1)):h("",!0),C("div",null,T(a.meta.description),1),a.meta.image!=null?(f(),$(v,{key:1,src:a.meta.image,fit:"scale-down"},null,8,["src"])):h("",!0)])]),_:1})]),_:1})]),_:1})}}});const Ys=Ct(Ms,[["__scopeId","data-v-1367b2bb"]]);export{Ys as default};
